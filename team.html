<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Team | NGO Impact</title>
  <meta name="description" content="Meet our dedicated team members."/>
  <style>
    :root { --green: #2e7d32; --blue: #1976d2; --light: #f5f5f5; --dark: #333; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, sans-serif; line-height: 1.6; color: var(--dark); background: var(--light); }
    header { background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
    nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem; }
    .logo { font-weight: bold; color: var(--green); font-size: 1.4rem; text-decoration: none; }
    .nav-links { display: flex; gap: 1.5rem; list-style: none; }
    .nav-links a { text-decoration: none; color: var(--dark); }
    .hamburger { display: none; flex-direction: column; cursor: pointer; }
    .hamburger span { width: 25px; height: 3px; background: var(--dark); margin: 3px 0; }
    main { padding: 2rem 1rem; max-width: 1200px; margin: 0 auto; }
    h1 { margin-bottom: 2rem; text-align: center; color: var(--green); }
    .team-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 2rem; }
    .member { background: white; padding: 1.5rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .member img { width: 120px; height: 120px; object-fit: cover; border-radius: 50%; margin-bottom: 1rem; }
    .member h3 { margin-bottom: 0.3rem; }
    .member .role { color: var(--blue); font-weight: 500; margin-bottom: 0.8rem; }
    .loading { text-align: center; padding: 2rem; }
    footer { text-align: center; padding: 2rem 1rem; color: #666; border-top: 1px solid #eee; margin-top: 3rem; }
    @media (max-width: 768px) {
      .nav-links { display: none; position: absolute; top: 100%; left: 0; width: 100%; background: white; flex-direction: column; padding: 1rem; gap: 1rem; }
      .nav-links.active { display: flex; }
      .hamburger { display: flex; }
    }
  </style>
</head>
<body>
  <header>
    <nav aria-label="Main navigation">
      <a href="index.html" class="logo">NGO Impact</a>
      <ul class="nav-links" id="navLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="activities.html">Activities</a></li>
        <li><a href="team.html">Team</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <div class="hamburger" id="hamburger" tabindex="0" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </nav>
  </header>

  <main>
    <h1>Our Team</h1>
    <div class="team-grid" id="teamContainer">
      <div class="loading">Loading team members...</div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 NGO Impact</p>
  </footer>

  <script>
    // Mobile nav
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    hamburger.addEventListener('click', () => navLinks.classList.toggle('active'));
    hamburger.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        navLinks.classList.toggle('active');
      }
    });

    // Parse YAML frontmatter + markdown body
    function parseFrontmatter(md) {
      if (!md.trim().startsWith('---')) return { data: {}, content: md };
      const parts = md.split(/---\s*/);
      const yaml = parts[1] || '';
      const content = parts.slice(2).join('---');
      const data = {};
      yaml.split('\n').forEach(line => {
        if (line.trim() && line.includes(':')) {
          const [key, ...valueParts] = line.split(':');
          data[key.trim()] = valueParts.join(':').trim().replace(/^['"]|['"]$/g, '');
        }
      });
      return { data, content };
    }

    // Fetch all team member files
    async function loadTeamMembers() {
      try {
        // List all files in content/team/
        // Since we can't list directory in static hosting, we rely on known filenames
        // Alternative: generate a team.json during build (but you want pure static + PagesCMS)
        // Workaround: PagesCMS can output a team.json â€” but per your request, we avoid build step.
        // So: we assume team member slugs are known or fetch via a manifest.

        // âœ… Simple solution: PagesCMS can auto-generate `data/team.json` on commit.
        // But to keep 100% client-side + editable, we change strategy:

        // ðŸ”„ NEW: We will use `fetch` on each possible file? Not scalable.

        // ðŸ’¡ BETTER: Let PagesCMS generate `data/team.json` automatically from content/team/
        // â†’ Update README to instruct user to enable this in PagesCMS.

        // For now, we simulate by fetching a generated `data/team.json`
        // (which PagesCMS can maintain via Git hook or build plugin)

        const res = await fetch('data/team.json');
        if (!res.ok) throw new Error('Team data not found. Ensure PagesCMS generates data/team.json from content/team/.');

        const members = await res.json();

        const container = document.getElementById('teamContainer');
        if (members.length === 0) {
          container.innerHTML = '<p>No team members found.</p>';
          return;
        }

        // Sort by `order` if available
        members.sort((a, b) => (a.order || 999) - (b.order || 999));

        container.innerHTML = members.map(m => `
          <div class="member" role="article">
            <img src="${m.photo || 'content/images/default-avatar.jpg'}" alt="${m.name}" loading="lazy" />
            <h3>${m.name}</h3>
            <div class="role">${m.role}</div>
            <p>${m.bio || ''}</p>
          </div>
        `).join('');
      } catch (err) {
        document.getElementById('teamContainer').innerHTML = `<p class="loading">Error loading team: ${err.message}</p>`;
      }
    }

    // On load
    document.addEventListener('DOMContentLoaded', loadTeamMembers);
  </script>
</body>
</html>